<!-- datosgrales.html -->
{% extends "MenuPrincipal.html" %}
<body>
{% block content %}
{% load forms_tags %}
{% load custom_filters %}

 <div class="interno-container">
  <div class="sticky-top bg-white" style="z-index: 1020; top: 0;">
      <div class="interno-tabs  d-flex align-items-center ">
      <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item" role="presentation">
          <a class="nav-link active" data-bs-toggle="tab" href="#datosgenerales" role="tab">
             Datos generales
          </a>
        </li>
        <li class="nav-item" role="presentation">
          <a class="nav-link" data-bs-toggle="tab" href="#responsable" role="tab">
            Responsable y dependientes
          </a>
        </li>

         <li class="nav-item" role="presentation">
          <a class="nav-link" data-bs-toggle="tab" href="#proviene" role="tab">
             Proviene, Historial medico y sustancias que consume
          </a>
        </li>

      </ul>
          <a class="btn btn-outline-danger ms-auto" href="{% url 'Menu principal' %}">
                    <i class="bi bi-x-circle me-1"></i>Cerrar
         </a>

    </div>

  </div>



    {% if interno and interno.pk %}
    <form action="{% url 'grabainterno' id=interno.pk %} " method="post">
        {% csrf_token %}

        <div class="tab-content">
          <div class="tab-pane fade show active" id="datosgenerales" role="tabpanel">
  <!-- Card Principal -->

              <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                    <i class="fas fa-user me-1"></i>Datos del interno
                    </h3>
                </div>

           <div class="card-body  pe-0">
              <div class="row mx-0">
              {% for field in internof %}
                 <div class="col-md-6 ps-0">
              {% if 'opciones-radio' in field.field.widget.attrs.class %}
              <div class="form-group mb-1">
                 <label class="form-label fw-bold d-block mb-2">{{ field.label }}</label>
              <div class="btn-group btn-group-toggle w-100" style="max-width: 100%; overflow-x: auto;" data-toggle="buttons">
                   {% for choice in field %}
                <label class="btn btn-outline-primary" for="{{ choice.id_for_label }}" style="white-space: nowrap;font-size:0.75rem">
                   {{ choice.tag }}
                   {{ choice.choice_label }}
                </label>
                   {% endfor %}
                </div>
              </div>
              {% else %}
              <div class="form-group mb-1">
                 <label for="{{ field.id_for_label }}" class="form-label fw-bold d-block mb-1">
                 {{ field.label }}
                 </label>
                 {{ field|add_class:"form-control w-100" }}
               </div>
           {% endif %}
        </div>
        {% endfor %}
      </div>

      <!-- Campos adicionales - Mismo estilo con margen reducido -->
      <div class="row mx-0">
        <div class="col-md-4 ps-0">
          <div class="form-group mb-1 ps-0">
            <label for="{{ intprovienef.numeroreuniones.id_for_label }}" class="form-label fw-bold d-block mb-1">
              {{ intprovienef.numeroreuniones.label }}
            </label>
            {{ intprovienef.numeroreuniones }}
          </div>
        </div>

        <div class="col-md-4 ps-0 ">
          <div class="form-group mb-1 ps-0">
            <label for="{{ intprovienef.diversasactividades.id_for_label }}" class="form-label fw-bold d-block mb-1">
              {{ intprovienef.diversasactividades.label }}
            </label>
            {{ intprovienef.diversasactividades }}
          </div>
        </div>

        <div class="col-md-4 ps-0">
          <div class="form-group mb-1 ps-0">
            <label for="{{ intprovienef.duracion.id_for_label }}" class="form-label fw-bold d-block mb-1">
              {{ intprovienef.duracion.label }}
            </label>
            {{ intprovienef.duracion }}
          </div>
        </div>
<!-- TUS CAMPOS (Ya ajustados con los IDs estándar de Django) -->
<div class="row">

    <!-- Campo: Aportación Total -->
    <div class="col-md-4 ps-0">
        <div class="form-group mb-1 ps-0">
            <label for="id_aportaciontotal" class="form-label fw-bold d-block mb-1">
                {{ intprovienef.aportaciontotal.label }}
            </label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                {{ intprovienef.aportaciontotal }}
            </div>
        </div>
    </div>

    <!-- Campo: Aportación Inicial -->
    <div class="col-md-4 ps-0">
        <div class="form-group mb-1 ps-0">
            <label for="id_aportacioninicial" class="form-label fw-bold d-block mb-1">
                {{ intprovienef.aportacioninicial.label }}
            </label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                {{ intprovienef.aportacioninicial }}
            </div>
        </div>
    </div>

    <!-- Campo: Saldo (Readonly) -->
    <div class="col-md-4 ps-0">
        <div class="form-group mb-1 ps-0">
            <label for="id_saldo" class="form-label fw-bold d-block mb-1">
                {{ intprovienef.saldo.label }}
            </label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                {{ intprovienef.saldo }}
            </div>
        </div>
    </div>

</div>
 <div class="col-md-4 ps-0">
        <div class="form-group mb-1 ps-0">
            <label for="id_cuota" class="form-label fw-bold d-block mb-1">
                {{ intprovienef.cuota.label }}
            </label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                {{ intprovienef.cuota }}
            </div>
        </div>
    </div>
         <div class="col-md-4 ps-0 ">
          <div class="form-group mb-1 ps-0">
            <label for="{{ intprovienef.periodopago.id_for_label }}" class="form-label fw-bold d-block mb-1">
              {{ intprovienef.periodopago.label }}
            </label>
            {{ intprovienef.periodopago }}
         </div>
         </div>
   <!-- === NUEVO BLOQUE: GENERADOR DE CUOTAS === -->
         <div class="col-12 mt-3 mb-2">
             <div class="card border-info bg-light">
                 <div class="card-body p-3">
                     <h6 class="card-title text-primary fw-bold mb-2">
                         <i class="fas fa-file-invoice-dollar me-1"></i> Programación de Cuotas Voluntarias
                     </h6>

                     <div class="row align-items-center">
                         <!-- 1. Checkbox para activar -->
                         <div class="col-md-6">
                             <div class="form-check form-switch">
                                 <input class="form-check-input" type="checkbox" id="generar_cuotas" name="generar_cuotas" value="true">
                                 <label class="form-check-label fw-bold" for="generar_cuotas">
                                     ¿Generar archivo de cuotas automáticamente?
                                 </label>
                             </div>
                             <small class="text-muted d-block lh-1 mt-1">
                                 Si se marca, se crearán cargos en el Edo. de Cuenta basándose en el <strong>Saldo</strong>, la <strong>Cuota</strong> y el <strong>Periodo</strong>.
                             </small>
                         </div>

                         <!-- 2. Fecha de inicio -->
                         <div class="col-md-6">
                             <div class="form-group">
                                 <label for="fecha_inicio_pago" class="form-label fw-bold small mb-1">
                                     Fecha del 1er Pago:
                                 </label>
                                 <!-- Se pone la fecha de hoy por defecto -->
                                 <input type="date" class="form-control form-control-sm"
                                        id="fecha_inicio_pago" name="fecha_inicio_pago"
                                        value="{% now 'Y-m-d' %}">
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>



      </div>
    </div>
  </div>
           </div>
          <div class="tab-pane fade" id="responsable" role="tabpanel">
  <!-- Card Principal Compacta -->
  <div class="card shadow-sm border-0">
    <div class="card-header bg-primary text-white py-2"> <!-- Header más compacto -->
      <h3 class="card-title mb-0 h5"> <!-- Título más pequeño -->
        <i class="fas fa-user-tie me-1"></i>Responsable
      </h3>
    </div>

    <div class="card-body p-3"> <!-- Padding reducido -->

        <div class="row g-2"> <!-- Espacio entre filas reducido -->
          {% for field in intresponsablef %}
          <div class="col-md-6">
            {% if 'opciones-radio' in field.field.widget.attrs.class %}
            <!-- Grupo de radio buttons compacto -->
            <div class="form-group mb-2"> <!-- Margen inferior reducido -->
              <label class="form-label fw-bold d-block mb-1 small">{{ field.label }}</label> <!-- Label más pequeño -->
              <div class="ps-1"> <!-- Padding izquierdo mínimo -->
                {% for choice in field %}
                <div class="form-check py-1"> <!-- Espaciado vertical reducido -->
                  {{ choice.tag }}
                  <label class="form-check-label small" for="{{ choice.id_for_label }}"> <!-- Texto más pequeño -->
                    {{ choice.choice_label }}
                  </label>
                </div>
                {% endfor %}
              </div>
            </div>
            {% else %}
            <!-- Campo normal compacto -->
            <div class="form-group mb-2"> <!-- Margen inferior reducido -->
              <label for="{{ field.id_for_label }}" class="form-label fw-bold d-block mb-1 "> <!-- Label más pequeño -->
                {{ field.label }}
              </label>
              {{ field|add_class:"form-control w-100" }} <!-- Input más compacto -->
            </div>
            {% endif %}
          </div>
          {% endfor %}
        </div>

    </div>
  </div>

        <!-- Seccion de Los Dependientes -->

  <!-- Tarjeta Principal -->
  <div class="card border-0 shadow-sm">
    <div class="card-header bg-primary text-white py-3">
      <h5 class="card-title mb-0">
        <i class="fas fa-users me-2"></i> Dependientes
      </h5>
    </div>

    <div class="card-body">
      <!-- Sección de Dependientes -->
      <div class="row g-3">
        <!-- Campo: Padres -->
        <div class="col-md-6 col-lg-3">
          <div class="form-group mb-3">
            <div class="form-check form-switch">
              {{ intdependientesf.dpadres|add_class:"form-check-input" }}
              <label class="form-check-label fw-bold" for="{{ intdependientesf.dpadres.id_for_label }}">
                <i class="fas fa-user-friends me-1"></i> {{ intdependientesf.dpadres.label }}
              </label>
            </div>
          </div>
        </div>

        <!-- Campo: Cónyuge -->
        <div class="col-md-6 col-lg-3">
          <div class="form-group mb-3">
            <div class="form-check form-switch">
              {{ intdependientesf.dconyugue|add_class:"form-check-input" }}
              <label class="form-check-label fw-bold" for="{{ intdependientesf.dconyugue.id_for_label }}">
                <i class="fas fa-user-friends me-1"></i> {{ intdependientesf.dconyugue.label }}
              </label>
            </div>
          </div>
        </div>

        <!-- Campo: Hijos -->
        <div class="col-md-6 col-lg-3">
          <div class="form-group mb-3">
            <div class="form-check form-switch">
              {{ intdependientesf.dhijos|add_class:"form-check-input" }}
              <label class="form-check-label fw-bold" for="{{ intdependientesf.dhijos.id_for_label }}">
                <i class="fas fa-child me-1"></i> {{ intdependientesf.dhijos.label }}
              </label>
            </div>
          </div>
        </div>

        <!-- Campo: Otros -->
        <div class="col-md-6 col-lg-3">
          <div class="form-group mb-3">
            <div class="form-check form-switch">
              {{ intdependientesf.dotros|add_class:"form-check-input" }}
              <label class="form-check-label fw-bold" for="{{ intdependientesf.dotros.id_for_label }}">
                <i class="fas fa-users me-1"></i> {{ intdependientesf.dotros.label }}
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Sección de Comentarios -->
      <div class="mt-4 pt-3 border-top">
        <h5 class="text-primary mb-3">
          <i class="fas fa-comment-dots me-2"></i> Comentarios
        </h5>
        <div class="form-group">
          {{ intdependientesf.comentarios|add_class:"form-control" }}
        </div>
      </div>
    </div>
  </div>
</div>
          <div class="tab-pane fade" id="proviene" role="tabpanel">
  <!-- Sección de Datos del Interno - Diseño Mejorado -->
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-header bg-primary text-white py-3">
      <h5 class="card-title mb-0">
        <i class="fas fa-info-circle me-2"></i> Información de Procedencia
      </h5>
    </div>
    <div class="card-body">
      <div class="row g-3">
        <!-- Campo: Proviene -->
        <div class="col-md-6">
          <div class="form-group">
            <label for="{{intproviene.proviene.id_for_label}}" class="form-label fw-bold">
              <i class="fas fa-map-marker-alt me-1"></i> {{ intprovienef.proviene.label }}
            </label>
            {{ intprovienef.proviene|add_class:"form-select" }}
          </div>
        </div>

        <!-- Campo: Proviene Otro -->
        <div class="col-md-6">
          <div class="form-group">
            <label for="{{intproviene.provieneotro.id_for_label}}" class="form-label fw-bold">
              <i class="fas fa-edit me-1"></i> {{ intprovienef.provieneotro.label }}
            </label>
            {{ intprovienef.provieneotro|add_class:"form-control" }}
          </div>
        </div>

        <!-- Campo: Acude con -->
        <div class="col-md-6">
          <div class="form-group">
            <label for="{{intproviene.acudecon.id_for_label}}" class="form-label fw-bold">
              <i class="fas fa-user-friends me-1"></i> {{ intprovienef.acudecon.label }}
            </label>
            {{ intprovienef.acudecon|add_class:"form-select" }}
          </div>
        </div>

        <!-- Campo: Acude Otro -->
        <div class="col-md-6">
          <div class="form-group">
            <label for="{{intproviene.acudeotro.id_for_label}}" class="form-label fw-bold">
              <i class="fas fa-edit me-1"></i> {{ intprovienef.acudeotro.label }}
            </label>
            {{ intprovienef.acudeotro|add_class:"form-control" }}
          </div>
        </div>

        <!-- Campos: Medicinas -->
        <div class="col-md-6">
          <div class="form-group">
            <div class="form-check form-switch">
              {{ intprovienef.tomamedicinas|add_class:"form-check-input" }}
              <label class="form-check-label fw-bold" for="{{intproviene.tomamedicinas.id_for_label}}">
                <i class="fas fa-pills me-1"></i> {{ intprovienef.tomamedicinas.label}}
              </label>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group">
            <label for="{{intproviene.especifique.id_for_label}}" class="form-label fw-bold">
              <i class="fas fa-comment-medical me-1"></i> {{ intprovienef.especifique.label }}
            </label>
            {{ intprovienef.especifique|add_class:"form-control" }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección de Enfermedades -->
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-header bg-primary text-white py-3">
      <h5 class="card-title mb-0">
        <i class="fas fa-heartbeat me-2"></i> Historial Médico
      </h5>
    </div>
    <div class="card-body">
      <div class="row g-3">
        <!-- Checkboxes de Enfermedades -->
        <div class="col-md-6 col-lg-3">
          <div class="form-check form-switch">
            {{ intprovienef.embarazo|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.embarazo.id_for_label}}">
              <i class="fas fa-baby me-1"></i> {{intprovienef.embarazo.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="form-check form-switch">
            {{ intprovienef.psiquiatricas|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.psiquiatricas.id_for_label}}">
              <i class="fas fa-brain me-1"></i> {{intprovienef.psiquiatricas.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="form-check form-switch">
            {{ intprovienef.fisicas|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.fisicas.id_for_label}}">
              <i class="fas fa-wheelchair me-1"></i> {{intprovienef.fisicas.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="form-check form-switch">
            {{ intprovienef.contagiosas|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.contagiosas.id_for_label}}">
              <i class="fas fa-virus me-1"></i> {{intprovienef.contagiosas.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-3">
          <div class="form-check form-switch">
            {{ intprovienef.basiloscopia|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.basiloscopia.id_for_label}}">
              <i class="fas fa-microscope me-1"></i> {{intprovienef.basiloscopia.label}}
            </label>
          </div>
        </div>

        <!-- Campo: Otras Enfermedades -->
        <div class="col-12 mt-3">
          <div class="form-group">
            <label for="{{intproviene.enfermedadesotro.id_for_label}}" class="form-label fw-bold">
              <i class="fas fa-plus-circle me-1"></i> {{intprovienef.enfermedadesotro.label}}
            </label>
            {{ intprovienef.enfermedadesotro|add_class:"form-control" }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección de Sustancias -->
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-header bg-primary text-white py-3">
      <h5 class="card-title mb-0">
        <i class="fas fa-syringe me-2"></i> Consumo de Sustancias
      </h5>
    </div>
    <div class="card-body">
      <div class="row g-3">
        <!-- Checkboxes de Sustancias -->
        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.alcohol|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.alcohol.id_for_label}}">
              <i class="fas fa-wine-glass-alt me-1"></i> {{intprovienef.alcohol.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.anfetaminas|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.anfetaminas.id_for_label}}">
              <i class="fas fa-tablets me-1"></i> {{intprovienef.anfetaminas.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.secantes|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.secantes.id_for_label}}">
              <i class="fas fa-prescription-bottle-alt me-1"></i> {{intprovienef.secantes.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.marihuana|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.marihuana.id_for_label}}">
              <i class="fas fa-cannabis me-1"></i> {{intprovienef.marihuana.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.rohypnol|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.rohypnol.id_for_label}}">
              <i class="fas fa-capsules me-1"></i> {{intprovienef.rohypnol.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.analgesicos|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.analgesicos.id_for_label}}">
              <i class="fas fa-pills me-1"></i> {{intprovienef.analgesicos.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.disolventes|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.disolventes.id_for_label}}">
              <i class="fas fa-flask me-1"></i> {{intprovienef.disolventes.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.cocaina|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.cocaina.id_for_label}}">
              <i class="fas fa-smoking me-1"></i> {{intprovienef.cocaina.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.opio|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.opio.id_for_label}}">
              <i class="fas fa-prescription-bottle me-1"></i> {{intprovienef.opio.label}}
            </label>
          </div>
        </div>

        <div class="col-md-6 col-lg-4">
          <div class="form-check form-switch">
            {{ intprovienef.cristal|add_class:"form-check-input" }}
            <label class="form-check-label fw-bold" for="{{intproviene.cristal.id_for_label}}">
              <i class="fas fa-vial me-1"></i> {{intprovienef.cristal.label}}
            </label>
          </div>
        </div>

        <!-- Campo: Por cuál ingresa -->
        <div class="col-12 mt-3">
          <div class="form-group">
            <label for="{{intproviene.porcualingresa.id_for_label}}" class="form-label fw-bold">
              <i class="fas fa-sign-in-alt me-1"></i> {{ intprovienef.porcualingresa.label }}
            </label>
            {{ intprovienef.porcualingresa|add_class:"form-control" }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

      <div class="form-actions mt-5">
      <button type="submit" class="btn btn-primary btn-save">
        <i class="bi bi-save"></i> Guardar registro
      </button>
      </div>
        </div>
    </form>
    {% endif%}
</div>
<div class="no-print" style="text-align: center; margin-top:-40px;margin-left:100px;">
    <div style="display: inline-flex; flex-wrap: wrap; gap: 8px; justify-content: center;">
        <button onclick="location.href='{% url 'consentimiento' id=interno.pk %}'"
                style="padding: 8px 12px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
         <i class="bi-file-text"></i>   Imprime Consentimiento
        </button>
        <button onclick="location.href='{% url 'imprime_contrato' id=interno.pk %}'"
                style="padding: 8px 12px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
          <i class="bi-printer"></i> Imprime Contrato
        </button>
        <button onclick="location.href='{% url 'imprime_solicitud' id=interno.pk %}'"
                style="padding: 8px 12px; background: #ffc107; color: black; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
           <i class="bi-file-text"></i>  Imprime Solicitud
        </button>
        <button onclick="location.href='{% url 'imprime_aviso' id=interno.pk %}'"
                style="padding: 8px 12px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
            <i class="bi-file-text"></i> Imprime Aviso
        </button>
    </div>
</div>

<style>
    /* 1. Para Chrome, Safari, Edge y Opera */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* 2. Para Firefox */
    input[type=number] {
        -moz-appearance: textfield;
    }
</style>




<!-- SCRIPT DE CÁLCULO AUTOMÁTICO -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 1. Obtenemos los campos por su ID (Django usa id_nombrecampo por defecto)
        const inputTotal = document.getElementById('id_aportaciontotal');
        const inputInicial = document.getElementById('id_aportacioninicial');
        const inputSaldo = document.getElementById('id_saldo');
        const inputCuota = document.getElementById('id_cuota');

        // 2. Función que hace la matemática
        function calcularSaldo() {
            // Obtenemos los valores, si está vacío cuenta como 0
            const total = parseFloat(inputTotal.value) || 0;
            const inicial = parseFloat(inputInicial.value) || 0;

            // Restamos
            const resultado = total - inicial;


            // Ponemos el resultado en el campo Saldo (con 2 decimales)
            inputSaldo.value = resultado.toFixed(2);
            inputCuota.value = inicial;

        }

        // 3. Escuchamos el evento 'input' (se activa cada vez que tecleas)
        if (inputTotal && inputInicial && inputSaldo) {
            inputTotal.addEventListener('input', calcularSaldo);
            inputInicial.addEventListener('input', calcularSaldo);
        }
    });
</script>


{% endblock %}
</body>



